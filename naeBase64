# -*- coding: utf-8 -*-
# Manifest={"Name": "LLDP Auto Labeler", "Description": "Updates descriptions from LLDP!", "Version": "1.0", "Author": "Admin"}
from aruba_nae.agents.agent import Agent
from aruba_nae.action.cli import ActionCLI
import re

class Agent(Agent):
    def on_agent_create(self):
        self.r1 = self.Rule("LLDP-Update")
        self.r1.condition("every 1.hour")
        self.r1.action(self.update_uplinks)

    def update_uplinks(self, event):
        cmd = ActionCLI("show lldp neighbor-info detail")
        output = cmd.execute()
        entries = re.split(r'-{10,}', output)
        for entry in entries:
            if not entry.strip(): continue
            local_m = re.search(r"Port\s+:\s+(.+)", entry)
            sys_m = re.search(r"Neighbor System-Name\s+:\s+(.+)", entry)
            rem_m = re.search(r"Neighbor Port-ID\s+:\s+(.+)", entry)
            if local_m and sys_m and rem_m:
                l_port = local_m.group(1).strip()
                s_name = re.sub(r'\s+', '_', sys_m.group(1).strip())
                r_port = re.sub(r'[^a-zA-Z0-9/]', '', rem_m.group(1).strip())
                desc = "UPLINK_TO_{}_{}".format(s_name, r_port)
                try:
                    ActionCLI("conf t\ninterface {}\ndescription {}\nxit\nexit".format(l_port, desc)).execute()
                except: pass